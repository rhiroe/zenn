---
title: Bashで複数行ペーストを受け付け、勝手に実行されないようにする
date: 2019-10-3
tags: ["Bash"]
excerpt: ペースト時に暴発しないので便利、副産物でirbも複数行ペーストが可能に！
---

Twitterに興味深い[ツイート](https://twitter.com/Yuppyhappytoyou/status/1179597940379095040)が流れていたので実践した。  
(本当はTweetを埋め込みたかったんだけどうまく埋め込めなかった...)

# Bashをアップデートする
Tweet元に参考記事があるのでそれを参考にしても良いです、多分方法は同じ。  
アップデートする理由としては`Bash-4.4`以上じゃないと、今回行うブラケットペーストをサポートしていないからです。  
なのでバージョンを確認して、`Bash-4.4`以上ならアップデートしなくても大丈夫だと思います。  
まぁでも、せっかくなのでアップデートしましょう。

ちなみにバージョン確認の方法は色々あるんですが、
```bash
bash --version
```
が字面的にわかりやすくて色々詳しく出るので一番いいかなと思います。

最新版をインストールするんですが、僕はMacユーザーなのでHomebrewを使います。
```bash
brew install bash
```
インストール先をログインシェルの候補に追加しておきます。  
この時編集するファイルは`/etc/shells`ですが、このファイルは読み取り専用になっているので、`sudo`を付けて編集コマンドを実行します。
```bash
sudo vi /etc/shells
```
いくつか既に書かれていると思いますが、最後の行あたりにインストールしたBashを追加しましょう。
```txt
/usr/local/bin/bash
```
そして起動時にログインするシェルを変更します。
```bash
chsh -s /usr/local/bin/bash
```
ターミナルを再起動するとバージョンが最新版になっていると思います。
```bash
bash --version
```

# ブラケットペーストを有効にする
これは簡単で、`~/.inputrc`ファイルに設定を追加します。
```bash
vi ~/.inputrc
```
```txt
set enable-bracketed-paste on
```
ターミナルを再起動すれば複数行のペーストを行なっても、  
Enterを入力しない限り実行されないようになっていると思います。
